<br>
<p><span style="font-family: Arial, Helvetica, sans-serif; color: rgb(166, 10, 8); font-size: 22px;">Memory Stick</span></p>
<br>
<div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="font-weight: bold">public</span> <span style="font-weight: bold">enum</span> Configuration {
    instance;

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String fileSeparator = System.getProperty(<span style="font-style: italic">&quot;file.separator&quot;</span>);
    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String userDirectory = System.getProperty(<span style="font-style: italic">&quot;user.dir&quot;</span>);

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String nameOfJavaArchive = <span style="font-style: italic">&quot;memory_stick.jar&quot;</span>;
    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String nameOfClass = <span style="font-style: italic">&quot;MemoryStick&quot;</span>;

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String typeOfMemoryStick = <span style="font-style: italic">&quot;02&quot;</span>;

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String nameOfSubFolder = <span style="font-style: italic">&quot;exchange_component_&quot;</span> + typeOfMemoryStick + fileSeparator + <span style="font-style: italic">&quot;jar&quot;</span>;
    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String subFolderPathOfJavaArchive = nameOfSubFolder + fileSeparator + nameOfJavaArchive;
    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String fullPathToJavaArchive = userDirectory + subFolderPathOfJavaArchive;

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">void</span> print() {
        System.out.println(<span style="font-style: italic">&quot;--- Configuration&quot;</span>);
        System.out.println(<span style="font-style: italic">&quot;fileSeparator              | &quot;</span> + fileSeparator);
        System.out.println(<span style="font-style: italic">&quot;userDirectory              | &quot;</span> + userDirectory);
        System.out.println(<span style="font-style: italic">&quot;typeOfMemoryStick          | &quot;</span> + typeOfMemoryStick);
        System.out.println(<span style="font-style: italic">&quot;nameOfSubFolder            | &quot;</span> + nameOfSubFolder);
        System.out.println(<span style="font-style: italic">&quot;nameOfJavaArchive          | &quot;</span> + nameOfJavaArchive);
        System.out.println(<span style="font-style: italic">&quot;subFolderPathOfJavaArchive | &quot;</span> + subFolderPathOfJavaArchive);
        System.out.println(<span style="font-style: italic">&quot;fullPathToJavaArchive      | &quot;</span> + fullPathToJavaArchive);
        System.out.println(<span style="font-style: italic">&quot;nameOfClass                | &quot;</span> + nameOfClass);
        System.out.println();
    }
}
</pre></div>
<br>
<div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="font-weight: bold">import</span> <span style="font-weight: bold">java.io.File</span>;
<span style="font-weight: bold">import</span> <span style="font-weight: bold">java.lang.reflect.Method</span>;
<span style="font-weight: bold">import</span> <span style="font-weight: bold">java.net.URL</span>;
<span style="font-weight: bold">import</span> <span style="font-weight: bold">java.net.URLClassLoader</span>;

<span style="font-weight: bold">public</span> <span style="font-weight: bold">class</span> <span style="font-weight: bold">Application</span> {
    <span style="font-weight: bold">private</span> Class clazz;
    <span style="font-weight: bold">private</span> Object instance;
    <span style="font-weight: bold">private</span> Object port;

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">static</span> <span style="font-weight: bold">void</span> main(String... args) {
        Application application = <span style="font-weight: bold">new</span> Application();
        application.execute();
    }

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">void</span> loadClazzFromJavaArchive() {
        <span style="font-weight: bold">try</span> {
            URL[] urls = {<span style="font-weight: bold">new</span> File(Configuration.instance.subFolderPathOfJavaArchive).toURI().toURL()};
            URLClassLoader urlClassLoader = <span style="font-weight: bold">new</span> URLClassLoader(urls, Application.class.getClassLoader());
            clazz = Class.forName(Configuration.instance.nameOfClass, <span style="font-weight: bold">true</span>, urlClassLoader);
            System.out.println(<span style="font-style: italic">&quot;class    | &quot;</span> + clazz + <span style="font-style: italic">&quot; - &quot;</span> + clazz.hashCode());
        } <span style="font-weight: bold">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">void</span> provideInstanceOfClass() {
        <span style="font-weight: bold">try</span> {
            instance = clazz.getMethod(<span style="font-style: italic">&quot;getInstance&quot;</span>).invoke(<span style="font-weight: bold">null</span>);
            System.out.println(<span style="font-style: italic">&quot;instance | &quot;</span> + instance.toString() + <span style="font-style: italic">&quot; - &quot;</span> + instance.hashCode());
        } <span style="font-weight: bold">catch</span> (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">void</span> provideComponentPort() {
        <span style="font-weight: bold">try</span> {
            port = clazz.getDeclaredField(<span style="font-style: italic">&quot;port&quot;</span>).get(instance);
            System.out.println(<span style="font-style: italic">&quot;port     | &quot;</span> + port.toString() + <span style="font-style: italic">&quot; - &quot;</span> + port.hashCode());
        } <span style="font-weight: bold">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">void</span> executeMethodDirectlyWithoutPort() {
        System.out.println(<span style="font-style: italic">&quot;--- executeMethodDirectlyWithoutPort&quot;</span>);

        <span style="font-weight: bold">try</span> {
            Method method = clazz.getDeclaredMethod(<span style="font-style: italic">&quot;getVersion&quot;</span>);
            System.out.println(method);
            String version = (String) method.invoke(instance);
            System.out.println(<span style="font-style: italic">&quot;version  | &quot;</span> + version);
        } <span style="font-weight: bold">catch</span> (Exception e) {
            e.printStackTrace();
        }

        System.out.println();
    }

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">void</span> executeMethodUsingPort01() {
        System.out.println(<span style="font-style: italic">&quot;--- executeMethodUsingPort01&quot;</span>);

        <span style="font-weight: bold">try</span> {
            Method method = port.getClass().getMethod(<span style="font-style: italic">&quot;getCapacity&quot;</span>);
            System.out.println(method);
            <span style="font-weight: bold">int</span> result = (<span style="font-weight: bold">int</span>) method.invoke(port);
            System.out.println(<span style="font-style: italic">&quot;result   | &quot;</span> + result);
        } <span style="font-weight: bold">catch</span> (Exception e) {
            e.printStackTrace();
        }

        System.out.println();
    }

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">void</span> executeMethodUsingPort02() {
        System.out.println(<span style="font-style: italic">&quot;--- executeMethodUsingPort02&quot;</span>);

        <span style="font-weight: bold">try</span> {
            Method method = port.getClass().getMethod(<span style="font-style: italic">&quot;store&quot;</span>, <span style="font-weight: bold">int</span>[].class);
            System.out.println(method);
            <span style="font-weight: bold">int</span>[] valuesToStore = <span style="font-weight: bold">new</span> <span style="font-weight: bold">int</span>[]{1, 2, 3, 4, 5};
            <span style="font-weight: bold">boolean</span> result = (<span style="font-weight: bold">boolean</span>) method.invoke(port, valuesToStore);
            System.out.println(<span style="font-style: italic">&quot;result   | &quot;</span> + result);
        } <span style="font-weight: bold">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">void</span> execute() {
        Configuration.instance.print();
        loadClazzFromJavaArchive();
        provideInstanceOfClass();
        provideComponentPort();
        System.out.println();
        executeMethodDirectlyWithoutPort();
        executeMethodUsingPort01();
        executeMethodUsingPort02();
    }
}
</pre></div>
<br>
<p><span style="font-family: Arial, Helvetica, sans-serif; font-size: 11px;">Prof. Dr. Carsten M&uuml;ller <span style="color: rgb(166, 10, 8);">|</span> Software Engineering</span></p>