<br>
<p><span style="font-family: Arial, Helvetica, sans-serif; color: rgb(166, 10, 8); font-size: 22px;">Calculator</span></p>
<br>
<div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="font-weight: bold">public</span> <span style="font-weight: bold">enum</span> CalculatorType {
    NORMAL, EXTENDED, SCIENTIFIC
}
</pre></div>
<br>
<div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="font-weight: bold">import</span> <span style="font-weight: bold">java.io.FileInputStream</span>;
<span style="font-weight: bold">import</span> <span style="font-weight: bold">java.util.Properties</span>;

<span style="font-weight: bold">public</span> <span style="font-weight: bold">enum</span> Configuration {
    instance;

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String userDirectory = System.getProperty(<span style="font-style: italic">&quot;user.dir&quot;</span>);
    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String fileSeparator = System.getProperty(<span style="font-style: italic">&quot;file.separator&quot;</span>);
    <span style="font-weight: bold">public</span> <span style="font-weight: bold">final</span> String pathToJar = userDirectory + fileSeparator + getCalculatorType() + fileSeparator + <span style="font-style: italic">&quot;jar&quot;</span> + fileSeparator + <span style="font-style: italic">&quot;calculator.jar&quot;</span>;

    <span style="font-weight: bold">public</span> CalculatorType getCalculatorType() {
        <span style="font-weight: bold">try</span> {
            Properties properties = <span style="font-weight: bold">new</span> Properties();
            FileInputStream fileInputStream = <span style="font-weight: bold">new</span> FileInputStream(userDirectory + fileSeparator + <span style="font-style: italic">&quot;calculator.props&quot;</span>);
            properties.load(fileInputStream);
            fileInputStream.close();

            <span style="font-weight: bold">return</span> switch (properties.getProperty(<span style="font-style: italic">&quot;calculatorType&quot;</span>)) {
                <span style="font-weight: bold">case</span> <span style="font-style: italic">&quot;normal&quot;</span> -&gt; CalculatorType.NORMAL;
                <span style="font-weight: bold">case</span> <span style="font-style: italic">&quot;extended&quot;</span> -&gt; CalculatorType.EXTENDED;
                <span style="font-weight: bold">case</span> <span style="font-style: italic">&quot;scientific&quot;</span> -&gt; CalculatorType.SCIENTIFIC;
                <span style="font-weight: bold">default</span> -&gt; <span style="font-weight: bold">null</span>;
            };
        } <span style="font-weight: bold">catch</span> (Exception e) {
            System.out.println(e.getMessage());
        }

        <span style="font-weight: bold">return</span> <span style="font-weight: bold">null</span>;
    }
}
</pre></div>
<br>
<div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="font-weight: bold">import</span> <span style="font-weight: bold">java.io.File</span>;
<span style="font-weight: bold">import</span> <span style="font-weight: bold">java.lang.reflect.Method</span>;
<span style="font-weight: bold">import</span> <span style="font-weight: bold">java.net.URL</span>;
<span style="font-weight: bold">import</span> <span style="font-weight: bold">java.net.URLClassLoader</span>;

<span style="font-weight: bold">public</span> <span style="font-weight: bold">class</span> <span style="font-weight: bold">Application</span> {
    <span style="font-weight: bold">private</span> Object port;

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">static</span> <span style="font-weight: bold">void</span> main(String... args) {
        Application application = <span style="font-weight: bold">new</span> Application();
        application.createCalculatorPortInstance();
        System.out.println(<span style="font-style: italic">&quot;5 + 3     | &quot;</span> + application.execute(5, 3, <span style="font-style: italic">&quot;add&quot;</span>));
        System.out.println(<span style="font-style: italic">&quot;5 - 3     | &quot;</span> + application.execute(5, 3, <span style="font-style: italic">&quot;subtract&quot;</span>));
        System.out.println(<span style="font-style: italic">&quot;5 * 3     | &quot;</span> + application.execute(5, 3, <span style="font-style: italic">&quot;multiply&quot;</span>));
        System.out.println(<span style="font-style: italic">&quot;3 (prime) | &quot;</span> + application.isPrime(<span style="font-style: italic">&quot;3&quot;</span>));
    }

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">void</span> createCalculatorPortInstance() {
        Object instance;

        <span style="font-weight: bold">try</span> {
            System.out.println(<span style="font-style: italic">&quot;pathToJar | &quot;</span> + Configuration.instance.pathToJar);
            URL[] urls = {<span style="font-weight: bold">new</span> File(Configuration.instance.pathToJar).toURI().toURL()};
            URLClassLoader urlClassLoader = <span style="font-weight: bold">new</span> URLClassLoader(urls, Application.class.getClassLoader());
            Class clazz = Class.forName(<span style="font-style: italic">&quot;Calculator&quot;</span>, <span style="font-weight: bold">true</span>, urlClassLoader);
            System.out.println(<span style="font-style: italic">&quot;clazz     | &quot;</span> + clazz);

            instance = clazz.getMethod(<span style="font-style: italic">&quot;getInstance&quot;</span>).invoke(<span style="font-weight: bold">null</span>);
            port = clazz.getDeclaredField(<span style="font-style: italic">&quot;port&quot;</span>).get(instance);
            System.out.println(<span style="font-style: italic">&quot;port      | &quot;</span> + port.hashCode());

            Method getVersion = port.getClass().getMethod(<span style="font-style: italic">&quot;getVersion&quot;</span>);
            String version = (String) getVersion.invoke(port);
            System.out.println(<span style="font-style: italic">&quot;version   | &quot;</span> + version);
        } <span style="font-weight: bold">catch</span> (Exception e) {
            System.out.println(<span style="font-style: italic">&quot;--- exception&quot;</span>);
            System.out.println(e.getMessage());
        }
    }

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">int</span> execute(<span style="font-weight: bold">int</span> a, <span style="font-weight: bold">int</span> b, String operation) {
        <span style="font-weight: bold">int</span> result = Integer.MAX_VALUE;

        <span style="font-weight: bold">try</span> {
            Method method = port.getClass().getMethod(operation, <span style="font-weight: bold">int</span>.class, <span style="font-weight: bold">int</span>.class);
            result = (Integer) method.invoke(port, a, b);
        } <span style="font-weight: bold">catch</span> (Exception e) {
            System.out.println(<span style="font-style: italic">&quot;operation &quot;</span> + operation + <span style="font-style: italic">&quot; not supported.&quot;</span>);
        }

        <span style="font-weight: bold">return</span> result;
    }

    <span style="font-weight: bold">public</span> <span style="font-weight: bold">boolean</span> isPrime(String string) {
        <span style="font-weight: bold">boolean</span> result = <span style="font-weight: bold">false</span>;

        <span style="font-weight: bold">try</span> {
            Method method = port.getClass().getMethod(<span style="font-style: italic">&quot;isPrime&quot;</span>, String.class);
            result = (Boolean) method.invoke(port, string);
        } <span style="font-weight: bold">catch</span> (Exception e) {
            System.out.println(<span style="font-style: italic">&quot;operation isPrime not supported.&quot;</span>);
        }

        <span style="font-weight: bold">return</span> result;
    }
}
</pre></div>
<br>
<div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">calculatorType=scientific
</pre></div>
<br>
<p><span style="font-family: Arial, Helvetica, sans-serif; font-size: 11px;">Prof. Dr. Carsten M&uuml;ller <span style="color: rgb(166, 10, 8);">|</span> Software Engineering</span></p>